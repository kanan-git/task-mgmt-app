{% load static %}

<div style="
border: 1px solid rgb(128,128,128); 
width: 450px; 
height: 250px; 
border-radius: 5px; 
padding: 10px;
overflow: hidden; 
display: flex; 
flex-direction: column; 
justify-content: space-around; 
align-items: center; 
background-color: rgb(230, 220, 220);"> <!-- . -->
<!-- COLOR GRADING WITH CHATGPT LATER -->
    <div style="
    width: 100%;
    display: flex; 
    justify-content: space-around;
    align-items: center;
    "> <!-- . -->
        <!-- <span>
            <button style="outline: none; border: none; background-color: transparent;">
                {% if card.is_starred == 0 %}
                    <img src="{% static 'img/icons/star-svgrepo-com-empty.svg' %}" alt="not_starred" style="width: 30px; height: 30px;">
                {% else %}
                    <img src="{% static 'img/icons/star-svgrepo-com-filled.svg' %}" alt="starred" style="width: 30px; height: 30px;">
                {% endif %}
            </button>
        </span> -->

        <span>
            ID: {{ card.id }}
        </span>

        <span>
            <button style="outline: none; border: none; background-color: transparent;"> <!-- . -->
                <img src="{% static 'img/icons/edit-svgrepo-com.svg' %}" alt="update_task" style="width: 30px; height: 30px;"> <!-- . -->
            </button>

            <button style="outline: none; border: none; background-color: transparent;"> <!-- . -->
                <img src="{% static 'img/icons/trash-bin-trash-svgrepo-com.svg' %}" alt="delete_task" style="width: 30px; height: 30px;"> <!-- . -->
            </button>
        </span>
    </div>

    <div style="
    width: 100%;
    margin: 20px 0px;
    "> <!-- . -->
        <p style="
        text-align: center;
        "> <!-- . -->
            {{ card.todo }}
        </p> <!-- SET LARGE LIMIT LIKE 256, IF DESCRIPTION IS OVERFLOW, CREATE READ MORE BUTTON FOR TOGGLE MORE/LESS or SCROLBAR-->

        <hr>

        <span>
            <div style="
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 10px;
            width: 90%;
            max-height: 100px;
            overflow-y: auto;
            "> <!-- . -->
                {% for category in card.category_of_task.all %}
                    <span>
                        {{ category.name }}
                    </span>
                {% endfor %}
            </div>
        </span> <!-- LIST ALL CATEGORIES WHICH CURRENT CARD HAVE -->
    </div>

    <div style="
    width: 100%;
    display: flex;
    justify-content: space-around;
    "> <!-- . -->
        <button>
            {{ card.priority_level }}  <!-- ANIMATED FLAME, PARTICLE AND FRAME RAISE, CHANGE COLOR FROM 1 TO 10, TIER EFFECTS -->
        </button>

        <div>
            {% if card.type_of_task_id == 1 %}
                {% if card.todo_status == 1 %}
                    <button style="
                    width: auto;
                    border: 1px solid rgb(255,255,255);
                    background-color: rgb(255,180,130);
                    outline: none;
                    cursor: pointer;
                    filter: drop-shadow(0px 0px 10px rgb(255,200,150));
                    border-radius: 5px;
                    "> Incomplete </button> <!-- . -->
                {% elif card.todo_status == 2 %}
                    <button style="
                    width: auto;
                    border: 1px solid rgb(255,255,255);
                    background-color: rgb(255,255,100);
                    outline: none;
                    cursor: pointer;
                    filter: drop-shadow(0px 0px 10px rgb(255,255,150));
                    border-radius: 5px;
                    "> Work In Progress </button> <!-- . -->
                {% elif card.todo_status == 3 %}
                    <button style="
                    width: auto;
                    border: 1px solid rgb(255,255,255);
                    background-color: rgb(100,200,100);
                    outline: none;
                    cursor: pointer;
                    filter: drop-shadow(0px 0px 10px rgb(120,220,120));
                    border-radius: 5px;
                    "> Done </button> <!-- . -->
                {% endif %}
            {% else %}
                <span style="
                position: relative;
                border: 1px solid rgb(180,180,180);
                width: 200px;
                "> <!-- . -->
                    <span style="
                    position: relative;
                    z-index: 5;
                    "> <!-- . -->
                        {{ card.progression_start }} of {{ card.progression_end }}
                    </span>

                    <span id="progression_bar" style="
                    position: absolute;
                    left: 0;
                    top: 0;
                    width: 0%;
                    height: 100%;
                    overflow: hidden;
                    background-color: transparent;
                    z-index: 1;
                    "> <!-- . -->
                        <span style="
                        position: absolute;
                        width: 200px;
                        height: 100%;
                        background: linear-gradient(to right, rgba(255,255,128,1.0), rgba(255,128,0,1.0));
                        z-index: 2;
                        "></span> <!-- . -->
                    </span>
                </span>

                <span style="display: none;">
                    <span id="hidden_start_tag">{{card.progression_start}}</span>
                    <span id="hidden_end_tag">{{card.progression_end}}</span>
                    <script>
                        function milestone_percentage() {
                            var value_start = document.getElementById('hidden_start_tag').innerText
                            var value_end = document.getElementById('hidden_end_tag').innerText
                            var result = (value_start/value_end)*100
                            var bar = document.getElementById('progression_bar').style.width = `${result}%`
                        }
                        milestone_percentage()
                    </script>
                </span>
            {% endif %}
        </div>
    </div>

    <!--  <img src="{% static 'img/categ/' %}" alt="CUSTOM BACKGROUND IMAGE BY CATEGORY WITH OVERLAY AND EFFECTS"> -->
</div>